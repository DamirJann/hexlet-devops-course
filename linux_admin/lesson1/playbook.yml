- hosts: webservers
  gather_facts: false
  vars:
    username: tirion
  tasks: 
    - name: create user
      remote_user: root
      ansible.builtin.user:
        name: "{{ username }}"
        groups: 
          - sudo
    - name: install python
      remote_user: root 
      ansible.builtin.apt:
        name: python3
    - name: run server
      remote_user: "{{ username }}"
      ansible.builtin.command:
        cmd: "sudo python"
        argv: "-m http.server 8000 --bind 127.0.0.1 > /tmp/log.txt" 
